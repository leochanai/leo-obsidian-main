---
name: managing-local-servers
description: æ‰¹é‡ç®¡ç†æœ¬åœ°æœåŠ¡å™¨é›†ç¾¤çš„ç”Ÿå‘½å‘¨æœŸã€‚æ”¯æŒæŸ¥è¯¢çŠ¶æ€ã€ä¸€é”®å¯åŠ¨æ‰€æœ‰è™šæ‹Ÿæœº(virsh start)ä»¥åŠå®‰å…¨å…³é—­æœåŠ¡å™¨(è‡ªåŠ¨å¤„ç†VMä¸‹ç”µ)ã€‚
version: 1.1.0
---

## æ¦‚è§ˆ
æ­¤æŠ€èƒ½æä¾›äº†ä¸€å¥—å·¥å…·é›†ï¼Œç”¨äºç®¡ç†æœ¬åœ°å®éªŒå®¤ç¯å¢ƒä¸­çš„å¤šå°ç‰©ç†æœåŠ¡å™¨ (`192.168.0.x/2.x`)ã€‚

## å…³é”®ç‰¹æ€§
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**: æ”¯æŒ **æŸ¥è¯¢ (Query)**ã€**å¯åŠ¨ (Start)** å’Œ **åœæ­¢ (Stop)** ä¸‰ç§æ“ä½œã€‚
- **VM æ„ŸçŸ¥**: è‡ªåŠ¨æ£€æµ‹ KVM/Libvirt è™šæ‹ŸæœºçŠ¶æ€ï¼Œç¡®ä¿å…³æœºæ—¶æ•°æ®å®‰å…¨ï¼Œå¼€æœºæ—¶ä¸šåŠ¡è‡ªåŠ¨æ¢å¤ã€‚
- **æ‰¹é‡å¹¶å‘**: é€šè¿‡ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ (`servers.json`) ç®¡ç†å¤šå°ä¸»æœºã€‚
- **æ— éœ€ Key**: ä½¿ç”¨ `expect` è‡ªåŠ¨å¤„ç† SSH å¯†ç è®¤è¯ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®æ–‡ä»¶
æ‰€æœ‰æ“ä½œå…±äº« `scripts/servers.json` é…ç½®ã€‚

### 2. æ“ä½œæŒ‡ä»¤
è¿›å…¥æŠ€èƒ½ç›®å½•: `cd 13\ Skills/managing-local-servers`

**ğŸ” æŸ¥è¯¢çŠ¶æ€ (Query)**
æ£€æŸ¥ç‰©ç†æœºåœ¨çº¿çŠ¶æ€åŠ VM è¿è¡Œæƒ…å†µã€‚
```bash
python3 scripts/query_servers.py
```

**ğŸš€ ä¸€é”®å¯åŠ¨ (Start)**
æ‰¹é‡å¯åŠ¨æ‰€æœ‰ç‰©ç†æœºä¸Šå¤„äºã€Œå…³é—­ã€çŠ¶æ€çš„è™šæ‹Ÿæœºã€‚
*(æ³¨: ç‰©ç†æœºéœ€å…ˆæ‰‹åŠ¨å¼€æœºæˆ–é€šè¿‡ WoL å”¤é†’)*
```bash
python3 scripts/start_servers.py
```

**ğŸ›‘ å®‰å…¨å…³æœº (Stop)**
ä¼˜é›…å…³é—­æ‰€æœ‰è¿è¡Œä¸­çš„ VMï¼Œéšåå…³é—­ç‰©ç†æœºã€‚
```bash
python3 scripts/stop_servers.py
```

## å·¥ä½œæµç¨‹ (Safety Protocol)
**å…³æœºæµç¨‹**: Connect -> Audit VMs -> Graceful Shutdown VMs -> Wait -> Host Shutdown
**å¼€æœºæµç¨‹**: Connect -> Find Shutoff VMs -> Start VMs -> Verify

## ä¾èµ–
- Python 3.x
- `expect` (macOS/Linux è‡ªå¸¦)
- ç›®æ ‡æœåŠ¡å™¨éœ€å®‰è£… `libvirt-clients` (`virsh`)
