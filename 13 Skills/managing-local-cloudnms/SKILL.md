---
name: managing-local-cloudnms
description: ç®¡ç†æœ¬åœ° Cloud NMS æœåŠ¡å™¨çš„å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬å¸è½½ã€ä¸Šä¼ ã€å…¨æ–°å®‰è£…å’Œä¿ç•™æ•°æ®å‡çº§ã€‚å½“ç”¨æˆ·éœ€è¦é‡æ–°å®‰è£… Cloud NMSã€éƒ¨ç½²æ–°ç‰ˆæœ¬ã€æˆ–åœ¨å¼€å‘ç¯å¢ƒä¸­é‡ç½® NMS æœåŠ¡æ—¶ä½¿ç”¨ã€‚
---

# ç®¡ç†æœ¬åœ° Cloud NMS æœåŠ¡å™¨

è‡ªåŠ¨åŒ–ç®¡ç†æœ¬åœ° Cloud NMS å¼€å‘ç¯å¢ƒçš„éƒ¨ç½²ã€å‡çº§å’Œç»´æŠ¤ã€‚

## è„šæœ¬æ¶æ„

```
scripts/
â”œâ”€â”€ common.sh            # å…¬å…±é…ç½®å’Œå·¥å…·å‡½æ•°
â”œâ”€â”€ 01_uninstall.sh      # æ­¥éª¤1: å¸è½½æœåŠ¡
â”œâ”€â”€ 02_upload.sh         # æ­¥éª¤2: ä¸Šä¼ å®‰è£…åŒ…
â”œâ”€â”€ 03_install.sh        # æ­¥éª¤3: å®‰è£…æœåŠ¡ (å«æ•°æ®åº“åˆå§‹åŒ–)
â””â”€â”€ deploy_cloudnms.sh   # ä¸»è„šæœ¬ï¼ˆè°ƒåº¦å™¨ï¼‰
```

## ä½¿ç”¨æ–¹æ³•

### å•æ­¥æ‰§è¡Œï¼ˆæ¨èè°ƒè¯•ï¼‰

æ¯ä¸ªè„šæœ¬éƒ½åŒ…å«æ ¡éªŒåŠŸèƒ½ï¼Œå¯ç‹¬ç«‹è¿è¡Œï¼š

```bash
cd scripts/

# æ­¥éª¤ 1: å¸è½½æœåŠ¡
./01_uninstall.sh          # äº¤äº’å¼å¸è½½
./01_uninstall.sh --check  # ä»…æ£€æŸ¥çŠ¶æ€ï¼Œä¸å¸è½½

# æ­¥éª¤ 2: ä¸Šä¼ å®‰è£…åŒ…
./02_upload.sh 1.1.0.6          # ä¸Šä¼ ï¼ˆè·³è¿‡å·²å­˜åœ¨ï¼‰
./02_upload.sh 1.1.0.6 --check  # ä»…æ£€æŸ¥ï¼Œä¸ä¸Šä¼ 
./02_upload.sh 1.1.0.6 --force  # å¼ºåˆ¶é‡æ–°ä¸Šä¼ 

# æ­¥éª¤ 3: å®‰è£…æœåŠ¡
./03_install.sh 1.1.0.6 fresh   # å…¨æ–°å®‰è£… (å«æ•°æ®åº“åˆå§‹åŒ–)
./03_install.sh 1.1.0.6 lite    # ä¿ç•™æ•°æ®å‡çº§
./03_install.sh 1.1.0.6 --check # ä»…æ£€æŸ¥å®‰è£…æ¡ä»¶
```

### æ ¡éªŒé€»è¾‘

| è„šæœ¬ | æ ¡éªŒé¡¹ |
|------|--------|
| `01_uninstall.sh` | æ£€æŸ¥ `/usr/local/cloud_nms/service` ç›®å½•ã€`~/CloudNMS*.zip` æ–‡ä»¶ |
| `02_upload.sh` | æ£€æŸ¥æœ¬åœ°å’ŒæœåŠ¡å™¨ä¸Šçš„ `~/CloudNMSDummyBusiness_{version}.zip` |
| `03_install.sh` | æ£€æŸ¥ `/usr/local/cloud_nms/service` ç›®å½•ã€å®‰è£…åŒ…ã€è®¸å¯è¯ |

### å®Œæ•´æµç¨‹

ä½¿ç”¨ä¸»è„šæœ¬ä¸€é”®å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼š

```bash
# äº¤äº’å¼æ¨¡å¼ï¼ˆèœå•é€‰æ‹©ï¼‰
./scripts/deploy_cloudnms.sh

# å‘½ä»¤è¡Œæ¨¡å¼
./scripts/deploy_cloudnms.sh 1.1.0.6 fresh  # ä¸Šä¼  + å…¨æ–°å®‰è£…
./scripts/deploy_cloudnms.sh 1.1.0.6 lite   # ä¸Šä¼  + ä¿ç•™æ•°æ®å‡çº§
```

## å®‰è£…æ¨¡å¼è¯´æ˜

| æ¨¡å¼ | è¯´æ˜ | åŒ…å«æ­¥éª¤ |
|------|------|----------|
| `fresh` | å…¨æ–°å®‰è£… | è§£å‹ã€å®‰è£…ã€å¯åŠ¨ã€æ•°æ®åº“åˆå§‹åŒ– |
| `lite` | ä¿ç•™æ•°æ®å‡çº§ | è§£å‹ã€å‡çº§å®‰è£…ã€å¯åŠ¨ |

## ç¯å¢ƒé…ç½®

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| æœåŠ¡å™¨ IP | 192.168.0.98 |
| SSH ç”¨æˆ· | cloud_nms / Genew1234 |
| æ•°æ®åº“å¯†ç  | 1Z_kF8s2mHcTnQHC |
| æœ¬åœ°æ„å»ºè·¯å¾„ | `/Users/farghost/IdeaProjects/HuahaiPlatform2/output` |
| Web è®¿é—®åœ°å€ | `https://192.168.0.98:31943` |

## å‰ç½®è¦æ±‚

å®‰è£… sshpassï¼ˆç”¨äºè‡ªåŠ¨åŒ– SSHï¼‰ï¼š
```bash
brew install sshpass
```

## æ•…éšœæ’é™¤

### æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ (mysql: command not found)

`03_install.sh` ä¼šè‡ªåŠ¨å°è¯•å¤šä¸ª MySQL è·¯å¾„ï¼š
1. `/usr/local/cloud_nms/env/mysql/bin/mysql`
2. `/usr/bin/mysql`
3. `mysql`

è‹¥å…¨éƒ¨å¤±è´¥ï¼Œä¼šä¸Šä¼  SQL æ–‡ä»¶å¹¶ç”Ÿæˆæ‰‹åŠ¨æ‰§è¡ŒæŒ‡å—ï¼š
```bash
ssh cloud_nms@192.168.0.98
/usr/local/cloud_nms/env/mysql/bin/mysql -u cloud_nms -p'1Z_kF8s2mHcTnQHC' cloud_nms < /tmp/init_cloudnms_users.sql
```

### Web è®¿é—®å¤±è´¥

æ£€æŸ¥ nginx æœåŠ¡ï¼š
```bash
ssh cloud_nms@192.168.0.98 "sudo systemctl status nginx"
ssh cloud_nms@192.168.0.98 "sudo systemctl start nginx"
```

## æ³¨æ„äº‹é¡¹

- âš ï¸ **å¼€å‘ç¯å¢ƒä¸“ç”¨** - åŒ…å«ç¡¬ç¼–ç å‡­æ®ï¼Œä¸å¯ç”¨äºç”Ÿäº§ç¯å¢ƒ
- ğŸ“¦ **è®¸å¯è¯æ–‡ä»¶** - ç¡®ä¿æœåŠ¡å™¨ `~` ç›®å½•ä¸‹å­˜åœ¨ `license.xml.sig`
- ğŸ’¾ **æ•°æ®å¤‡ä»½** - å…¨æ–°å®‰è£…ä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®
- ğŸŒ **ç½‘ç»œè¿æ¥** - éœ€è¦èƒ½è®¿é—® 192.168.0.98 æœåŠ¡å™¨
